<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CNC Planner Pro ‚Äî Vollst√§ndige Demo</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        /* === LANDING PAGE DESIGN SYSTEM === */
        :root {
            --primary: #1e3a5f;
            --primary-dark: #0f2840;
            --primary-light: #2d5a8a;
            --accent: #2563eb;
            --accent-dark: #1d4ed8;
            --success: #059669;
            --warning: #d97706;
            --danger: #dc2626;
            --purple: #7c3aed;
            --gray-50: #f8fafc;
            --gray-100: #f1f5f9;
            --gray-200: #e2e8f0;
            --gray-300: #cbd5e1;
            --gray-400: #94a3b8;
            --gray-500: #64748b;
            --gray-600: #475569;
            --gray-700: #334155;
            --gray-800: #1e293b;
            --gray-900: #0f172a;
            --radius: 6px;
            --radius-lg: 12px;
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--gray-100);
            color: var(--gray-800);
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: white;
            border-bottom: 1px solid var(--gray-200);
            padding: 16px 24px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-inner {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }

        .logo-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .logo-text {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--gray-900);
        }

        .logo-text span { color: var(--accent); }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border-radius: var(--radius);
            font-weight: 500;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: white;
            color: var(--gray-700);
            border-color: var(--gray-300);
        }

        .btn-secondary:hover {
            background: var(--gray-50);
            border-color: var(--gray-400);
        }

        .btn-accent {
            background: var(--accent);
            color: white;
        }

        .btn-accent:hover {
            background: var(--accent-dark);
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 0.8rem;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 32px 24px;
        }

        /* Section Header */
        .section-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .section-badge {
            display: inline-block;
            background: var(--gray-100);
            color: var(--primary);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 16px;
            border: 1px solid var(--gray-200);
        }

        .section-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: 12px;
        }

        .section-subtitle {
            font-size: 1.1rem;
            color: var(--gray-500);
            max-width: 600px;
            margin: 0 auto;
        }

        /* Project Cards */
        .projects-section {
            margin-bottom: 32px;
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .project-card {
            background: white;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .project-card:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-md);
        }

        .project-card.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(30, 58, 95, 0.05), rgba(37, 99, 235, 0.05));
        }

        .project-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .project-name {
            font-weight: 600;
            color: var(--gray-900);
        }

        .project-date {
            font-size: 0.75rem;
            color: var(--gray-400);
        }

        .project-meta {
            display: flex;
            gap: 16px;
            font-size: 0.85rem;
            color: var(--gray-600);
            margin-bottom: 12px;
        }

        .project-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .project-tag {
            background: var(--gray-100);
            color: var(--gray-600);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 500;
        }

        .project-tag.success {
            background: #ecfdf5;
            color: var(--success);
        }

        /* App Demo */
        .app-demo {
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            overflow: hidden;
        }

        .app-tabs {
            display: flex;
            background: var(--gray-50);
            border-bottom: 1px solid var(--gray-200);
        }

        .app-tab {
            padding: 16px 24px;
            background: none;
            border: none;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--gray-500);
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .app-tab:hover {
            color: var(--gray-700);
            background: white;
        }

        .app-tab.active {
            color: var(--primary);
            background: white;
        }

        .app-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary);
        }

        .app-content {
            padding: 24px;
            min-height: 600px;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        /* Quote Generator Form */
        .quote-form {
            background: linear-gradient(135deg, var(--purple), #6366f1);
            border-radius: var(--radius-lg);
            padding: 24px;
            color: white;
            margin-bottom: 24px;
        }

        .quote-form h3 {
            font-size: 1.1rem;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .form-group label {
            font-size: 0.8rem;
            font-weight: 500;
            opacity: 0.9;
        }

        .form-group input,
        .form-group select {
            padding: 10px 12px;
            border: none;
            border-radius: var(--radius);
            font-size: 0.9rem;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: 2px solid white;
        }

        .generate-btn {
            margin-top: 20px;
            background: white;
            color: var(--purple);
            border: none;
            padding: 14px 28px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .generate-btn:hover {
            transform: scale(1.05);
        }

        /* Quote Preview */
        .quote-preview {
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            padding: 32px;
        }

        .quote-header-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 32px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--primary);
        }

        .quote-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .quote-meta {
            text-align: right;
            font-size: 0.85rem;
            color: var(--gray-600);
        }

        .quote-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 24px;
        }

        .quote-table th {
            background: var(--gray-100);
            text-align: left;
            padding: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--gray-600);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .quote-table td {
            padding: 12px;
            border-bottom: 1px solid var(--gray-200);
        }

        .quote-table .price {
            text-align: right;
            font-family: 'JetBrains Mono', monospace;
        }

        .quote-total {
            background: var(--gray-50);
            padding: 20px;
            border-radius: var(--radius);
        }

        .quote-total-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 0.9rem;
        }

        .quote-total-row.grand {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
            border-top: 2px solid var(--primary);
            margin-top: 12px;
            padding-top: 16px;
        }

        /* Calculation Section */
        .calc-section {
            background: var(--gray-50);
            border-radius: var(--radius);
            padding: 24px;
            margin-bottom: 20px;
        }

        .calc-section h4 {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .calc-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .calc-table th {
            background: var(--gray-200);
            padding: 10px 12px;
            text-align: left;
            font-weight: 500;
            color: var(--gray-700);
        }

        .calc-table td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--gray-200);
            background: white;
        }

        .calc-table .formula {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--primary);
            background: var(--gray-100);
            padding: 2px 6px;
            border-radius: 4px;
        }

        .calc-table .result {
            font-weight: 600;
            color: var(--accent);
        }

        .calc-note {
            background: #eff6ff;
            border-left: 3px solid var(--primary);
            padding: 16px;
            font-size: 0.85rem;
            color: var(--gray-700);
            margin-top: 16px;
            border-radius: 0 var(--radius) var(--radius) 0;
        }

        .mini-progress {
            width: 60px;
            height: 6px;
            background: var(--gray-200);
            border-radius: 3px;
            overflow: hidden;
            display: inline-block;
            vertical-align: middle;
            margin-left: 8px;
        }

        .mini-progress-fill {
            height: 100%;
            background: var(--accent);
            border-radius: 3px;
        }

        /* Summary Grid */
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-top: 20px;
        }

        .summary-card {
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            padding: 16px;
            text-align: center;
        }

        .summary-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
        }

        .summary-label {
            font-size: 0.75rem;
            color: var(--gray-500);
            margin-top: 4px;
        }

        /* Tool Cost */
        .tool-total {
            background: var(--accent);
            color: white;
            padding: 16px 20px;
            border-radius: var(--radius);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 16px;
        }

        .tool-total-label { font-weight: 500; }
        .tool-total-value { font-size: 1.4rem; font-weight: 700; }

        /* Cost Summary Grid */
        .cost-summary-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-top: 20px;
        }

        .cost-card {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: var(--radius);
            text-align: center;
        }

        .cost-card-label {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .cost-card-value {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 4px 0;
        }

        .cost-card-detail {
            font-size: 0.75rem;
            opacity: 0.7;
        }

        .cost-card.total {
            background: rgba(255,255,255,0.25);
        }

        /* NC Code Block */
        .nc-code-block {
            background: var(--gray-900);
            border-radius: var(--radius);
            padding: 24px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: #e2e8f0;
            overflow-x: auto;
            max-height: 600px;
            overflow-y: auto;
            white-space: pre;
            line-height: 1.5;
        }

        .nc-code-block .comment { color: #718096; }
        .nc-code-block .keyword { color: #f6ad55; }
        .nc-code-block .number { color: #68d391; }
        .nc-code-block .gcode { color: #90cdf4; }
        .nc-code-block .mcode { color: #fc8181; }
        .nc-code-block .tool { color: #f6e05e; }

        /* Feedback Panel */
        .feedback-panel {
            background: linear-gradient(135deg, var(--purple), #6366f1);
            border-radius: var(--radius-lg);
            padding: 24px;
            color: white;
            margin-bottom: 24px;
        }

        .feedback-panel h4 {
            font-size: 1rem;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feedback-toggle {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            margin-left: auto;
        }

        .feedback-toggle:hover {
            background: rgba(255,255,255,0.3);
        }

        .feedback-history {
            background: rgba(255,255,255,0.1);
            border-radius: var(--radius);
            padding: 16px;
            margin-bottom: 16px;
        }

        .feedback-item {
            background: rgba(255,255,255,0.1);
            border-radius: var(--radius);
            padding: 12px;
            margin-bottom: 10px;
            font-size: 0.85rem;
        }

        .feedback-item:last-child { margin-bottom: 0; }

        .feedback-item-header {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            opacity: 0.8;
            margin-bottom: 6px;
        }

        .feedback-stars { color: #ffc107; }

        .feedback-tag {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            margin-right: 6px;
        }

        .feedback-form {
            display: none;
            background: rgba(255,255,255,0.1);
            border-radius: var(--radius);
            padding: 20px;
            margin-top: 16px;
        }

        .feedback-form.active { display: block; }

        .feedback-form .form-grid {
            grid-template-columns: repeat(2, 1fr);
        }

        .rating-stars {
            font-size: 1.5rem;
            cursor: pointer;
        }

        .rating-stars span {
            color: rgba(255,255,255,0.4);
            transition: color 0.2s;
        }

        .rating-stars span:hover,
        .rating-stars span.active {
            color: #ffc107;
        }

        /* Correction Grid */
        .correction-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .correction-card {
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            padding: 16px;
            text-align: center;
        }

        .correction-card h5 {
            color: var(--gray-700);
            font-size: 0.85rem;
            margin-bottom: 8px;
        }

        .correction-value {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--warning);
            font-family: 'JetBrains Mono', monospace;
        }

        .correction-unit {
            font-size: 0.8rem;
            color: var(--gray-500);
        }

        .correction-note {
            font-size: 0.7rem;
            color: var(--gray-400);
            margin-top: 8px;
            font-style: italic;
        }

        /* Instruction Section */
        .instruction-section {
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            margin-bottom: 16px;
            overflow: hidden;
        }

        .instruction-section.critical {
            border-color: var(--danger);
        }

        .instruction-header {
            background: var(--gray-50);
            padding: 14px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--gray-200);
        }

        .instruction-header.critical {
            background: #fef2f2;
        }

        .instruction-header h4 {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--gray-800);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .op-badge {
            background: var(--primary);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .op-badge.critical {
            background: var(--danger);
        }

        .badge {
            font-size: 0.7rem;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: 500;
        }

        .badge-critical {
            background: #fef2f2;
            color: var(--danger);
        }

        .instruction-content {
            padding: 20px;
        }

        .params-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        .param-item {
            background: var(--gray-50);
            padding: 12px;
            border-radius: var(--radius);
            text-align: center;
            border: 1px solid var(--gray-200);
        }

        .param-label {
            font-size: 0.7rem;
            color: var(--gray-500);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .param-value {
            font-size: 1rem;
            font-weight: 600;
            color: var(--gray-800);
            font-family: 'JetBrains Mono', monospace;
        }

        .tips-list {
            list-style: none;
        }

        .tips-list li {
            padding: 10px 0;
            font-size: 0.85rem;
            color: var(--gray-600);
            display: flex;
            align-items: flex-start;
            gap: 10px;
            border-bottom: 1px solid var(--gray-100);
        }

        .tips-list li:last-child { border-bottom: none; }

        .tip-icon {
            flex-shrink: 0;
            width: 20px;
            height: 20px;
            background: var(--gray-200);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
        }

        .tip-icon.warning { background: #fef3c7; color: var(--warning); }
        .tip-icon.danger { background: #fef2f2; color: var(--danger); }
        .tip-icon.success { background: #ecfdf5; color: var(--success); }

        /* Warning/Danger Box */
        .warning-box {
            background: #fef9e6;
            border-left: 4px solid var(--warning);
            padding: 16px 20px;
            border-radius: 0 var(--radius) var(--radius) 0;
            margin-bottom: 24px;
        }

        .warning-box strong { color: #92400e; }
        .warning-box span { color: #78350f; }

        /* Checklist */
        .checklist {
            list-style: none;
        }

        .checklist li {
            padding: 10px 12px;
            background: var(--gray-50);
            margin-bottom: 6px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.85rem;
            cursor: pointer;
        }

        .checklist li:hover {
            background: var(--gray-100);
        }

        .checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid var(--primary);
            border-radius: 3px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            color: white;
        }

        .checklist li.checked .checkbox {
            background: var(--primary);
        }

        /* Quality Table */
        .quality-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .quality-table th {
            background: var(--success);
            color: white;
            padding: 10px 12px;
            text-align: left;
            font-weight: 500;
        }

        .quality-table td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--gray-200);
        }

        .quality-table .check {
            color: var(--success);
            font-weight: 600;
            cursor: pointer;
        }

        /* Info Grid */
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .info-table {
            font-size: 0.85rem;
            width: 100%;
        }

        .info-table td {
            padding: 6px 0;
        }

        .info-table td:first-child {
            color: var(--gray-500);
            width: 40%;
        }

        /* AI Badge */
        .ai-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        /* Print */
        @media print {
            body { background: white; }
            .header, .app-tabs, .btn, .feedback-panel, .quote-form { display: none; }
            .app-content { padding: 0; }
            .app-demo { box-shadow: none; border: none; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .projects-grid,
            .form-grid,
            .info-grid,
            .params-grid,
            .correction-grid,
            .summary-grid,
            .cost-summary-grid {
                grid-template-columns: 1fr;
            }
            .app-tabs { overflow-x: auto; }
        }
    </style>
</head>
<body>

<!-- Header -->
<header class="header">
    <div class="header-inner">
        <a href="#" class="logo">
            <div class="logo-icon">CP</div>
            <div class="logo-text">CNC <span>Planner</span> Pro</div>
        </a>
        <div style="display: flex; gap: 12px;">
            <button class="btn btn-secondary btn-sm" onclick="exportCSV()">üìä CSV Export</button>
            <button class="btn btn-primary btn-sm" onclick="window.print()">üìÑ PDF</button>
        </div>
    </div>
</header>

<div class="container">
    <!-- Section Header -->
    <div class="section-header">
        <span class="section-badge">Vollst√§ndige Demo</span>
        <h2 class="section-title">CNC Planner Pro in Aktion</h2>
        <p class="section-subtitle">W√§hlen Sie ein Beispielprojekt oder erstellen Sie eine neue Kalkulation</p>
    </div>

    <!-- Project Selection -->
    <div class="projects-section">
        <div class="projects-grid">
            <div class="project-card active" onclick="loadProject('grundplatte')">
                <div class="project-header">
                    <div class="project-name">Grundplatte WCAD-15-02-2020</div>
                    <div class="project-date">Heute</div>
                </div>
                <div class="project-meta">
                    <span>‚è± 41,8 min</span>
                    <span>üî© 1.4571</span>
                    <span>üí∞ ‚Ç¨122,07</span>
                </div>
                <div class="project-tags">
                    <span class="project-tag success">‚úì Vollst√§ndig</span>
                    <span class="project-tag">h5 Toleranz</span>
                </div>
            </div>
            <div class="project-card" onclick="loadProject('lagerbock')">
                <div class="project-header">
                    <div class="project-name">Lagerbock WZ-2024-118</div>
                    <div class="project-date">Gestern</div>
                </div>
                <div class="project-meta">
                    <span>‚è± 28,5 min</span>
                    <span>üî© 42CrMo4</span>
                    <span>üí∞ ‚Ç¨85,20</span>
                </div>
                <div class="project-tags">
                    <span class="project-tag">Entwurf</span>
                </div>
            </div>
            <div class="project-card" onclick="loadProject('flansch')">
                <div class="project-header">
                    <div class="project-name">Flansch FL-889</div>
                    <div class="project-date">vor 3 Tagen</div>
                </div>
                <div class="project-meta">
                    <span>‚è± 18,2 min</span>
                    <span>üî© S355</span>
                    <span>üí∞ ‚Ç¨48,50</span>
                </div>
                <div class="project-tags">
                    <span class="project-tag success">‚úì Angebot erstellt</span>
                </div>
            </div>
        </div>
    </div>

    <!-- App Demo with Tabs -->
    <div class="app-demo">
        <div class="app-tabs">
            <button class="app-tab active" onclick="showTab('quote')">Angebot</button>
            <button class="app-tab" onclick="showTab('calculation')">Kalkulation</button>
            <button class="app-tab" onclick="showTab('code')">Maschinencode</button>
            <button class="app-tab" onclick="showTab('instructions')">Fertigungsanweisung</button>
        </div>

        <div class="app-content">
            <!-- ================ TAB: ANGEBOT ================ -->
            <div class="tab-panel active" id="panel-quote">
                <!-- Quote Generator Form -->
                <div class="quote-form">
                    <h3>üí∞ Angebot automatisch erstellen</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Kunde / Firma</label>
                            <input type="text" id="customerName" placeholder="z.B. Mustermann GmbH">
                        </div>
                        <div class="form-group">
                            <label>Ansprechpartner</label>
                            <input type="text" id="contactPerson" placeholder="z.B. Herr M√ºller">
                        </div>
                        <div class="form-group">
                            <label>Anfrage-Nr.</label>
                            <input type="text" id="projectRef" placeholder="z.B. ANF-2026-0042">
                        </div>
                        <div class="form-group">
                            <label>St√ºckzahl</label>
                            <input type="number" id="quantity" value="10" min="1">
                        </div>
                        <div class="form-group">
                            <label>Maschinenstundensatz (‚Ç¨/h)</label>
                            <input type="number" id="machineRate" value="85" step="5">
                        </div>
                        <div class="form-group">
                            <label>Materialpreis Rohteil (‚Ç¨)</label>
                            <input type="number" id="materialCost" value="45" step="5">
                        </div>
                        <div class="form-group">
                            <label>Material-Aufschlag (%)</label>
                            <input type="number" id="materialMarkup" value="15" step="5">
                        </div>
                        <div class="form-group">
                            <label>Gewinnmarge (%)</label>
                            <input type="number" id="profitMargin" value="20" step="5">
                        </div>
                        <div class="form-group">
                            <label>Lieferzeit (Wochen)</label>
                            <input type="number" id="deliveryWeeks" value="3" min="1">
                        </div>
                    </div>
                    <button class="generate-btn" onclick="generateQuote()">üìÑ Angebot generieren</button>
                </div>

                <!-- Generated Quote -->
                <div class="quote-preview" id="quoteOutput">
                    <div class="quote-header-row">
                        <div>
                            <div class="quote-title">ANGEBOT</div>
                            <div style="color: var(--gray-500); font-size: 0.85rem;">ANG-2026-0042</div>
                        </div>
                        <div class="quote-meta">
                            <div><strong>Maschinenbau Schlottwitz GmbH</strong></div>
                            <div>Datum: <span id="quoteDate">02.02.2026</span></div>
                            <div>G√ºltig bis: <span id="quoteValidUntil">04.03.2026</span></div>
                        </div>
                    </div>

                    <table class="quote-table">
                        <thead>
                            <tr>
                                <th>Pos.</th>
                                <th>Beschreibung</th>
                                <th>Menge</th>
                                <th class="price">EP (‚Ç¨)</th>
                                <th class="price">GP (‚Ç¨)</th>
                            </tr>
                        </thead>
                        <tbody id="quoteTableBody">
                            <tr>
                                <td>1</td>
                                <td>
                                    <strong>Grundplatte (Zahnradpumpe)</strong><br>
                                    <span style="color: var(--gray-500); font-size: 0.8rem;">WCAD-15-02-2020, Werkstoff 1.4571, 41,8 min/St√ºck</span>
                                </td>
                                <td id="quoteQty">10</td>
                                <td class="price" id="quotePricePerPart">122,07</td>
                                <td class="price" id="quoteSubtotalParts">1.220,70</td>
                            </tr>
                            <tr style="background: var(--gray-50);">
                                <td>2</td>
                                <td>Material: Edelstahl 1.4571, Rohteil √ò135√ó50mm</td>
                                <td id="quoteQty2">10</td>
                                <td class="price" colspan="2" style="color: var(--gray-500); font-style: italic;">inkl.</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="quote-total">
                        <div class="quote-total-row">
                            <span>Zwischensumme:</span>
                            <span id="quoteSubtotal">1.220,70 ‚Ç¨</span>
                        </div>
                        <div class="quote-total-row">
                            <span>Einmalige R√ºstkosten (30 min):</span>
                            <span id="quoteSetup">42,50 ‚Ç¨</span>
                        </div>
                        <div class="quote-total-row">
                            <span><strong>Nettosumme:</strong></span>
                            <span id="quoteNet">1.263,20 ‚Ç¨</span>
                        </div>
                        <div class="quote-total-row">
                            <span>zzgl. MwSt. 19%:</span>
                            <span id="quoteVat">240,01 ‚Ç¨</span>
                        </div>
                        <div class="quote-total-row grand">
                            <span>GESAMTBETRAG BRUTTO:</span>
                            <span id="quoteGross">1.503,21 ‚Ç¨</span>
                        </div>
                    </div>

                    <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--gray-200); font-size: 0.8rem; color: var(--gray-500);">
                        <strong>Zahlungsbedingungen:</strong> 14 Tage netto ab Rechnungsdatum<br>
                        <strong>Lieferzeit:</strong> ca. <span id="quoteDelivery">3-4</span> Wochen nach Auftragseingang
                    </div>

                    <div style="display: flex; gap: 12px; margin-top: 20px;">
                        <button class="btn btn-primary btn-sm" onclick="window.print()">üñ®Ô∏è Drucken / PDF</button>
                        <button class="btn btn-secondary btn-sm" onclick="copyQuote()">üìã Kopieren</button>
                    </div>
                </div>
            </div>

            <!-- ================ TAB: KALKULATION ================ -->
            <div class="tab-panel" id="panel-calculation">
                <!-- Formel -->
                <div class="calc-section">
                    <h4>üìê Berechnungsgrundlagen</h4>
                    <div class="calc-note">
                        <strong>Hauptzeit-Formel:</strong> t<sub>h</sub> = L / v<sub>f</sub> = L / (f √ó n)<br>
                        <span style="color: var(--gray-500);">t<sub>h</sub> = Hauptzeit [min] | L = Schnittweg [mm] | f = Vorschub [mm/U] | n = Drehzahl [U/min]</span>
                    </div>
                    <div style="margin-top: 16px; font-size: 0.85rem;">
                        <strong>Maschinendaten FEHLMANN VERSA¬Æ 943:</strong> Eilgang 40.000 mm/min | Spindel max. 12.000 U/min | Werkzeugwechsel 0,5 min
                    </div>
                </div>

                <!-- Zeitberechnung -->
                <div class="calc-section">
                    <h4>‚è±Ô∏è Detaillierte Zeitberechnung</h4>
                    <table class="calc-table" id="timeCalcTable">
                        <thead>
                            <tr>
                                <th>OP</th>
                                <th>Beschreibung</th>
                                <th>Berechnung</th>
                                <th>t_h</th>
                                <th>t_n</th>
                                <th>Gesamt</th>
                                <th style="width: 80px;">Anteil</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>OP10</strong></td>
                                <td>Planfr√§sen</td>
                                <td><span class="formula">L=750mm / f=300</span></td>
                                <td>1,9</td>
                                <td>0,8</td>
                                <td class="result">2,7</td>
                                <td><div class="mini-progress"><div class="mini-progress-fill" style="width: 6.5%;"></div></div></td>
                            </tr>
                            <tr>
                                <td><strong>OP20</strong></td>
                                <td>Schruppen Au√üen</td>
                                <td><span class="formula">œÄ√ó120√ó14 / f=400</span></td>
                                <td>7,2</td>
                                <td>0,8</td>
                                <td class="result">8,0</td>
                                <td><div class="mini-progress"><div class="mini-progress-fill" style="width: 19%;"></div></div></td>
                            </tr>
                            <tr>
                                <td><strong>OP30</strong></td>
                                <td>Schruppen Innen</td>
                                <td><span class="formula">Kreistasche / f=350</span></td>
                                <td>4,0</td>
                                <td>0,8</td>
                                <td class="result">4,8</td>
                                <td><div class="mini-progress"><div class="mini-progress-fill" style="width: 11%;"></div></div></td>
                            </tr>
                            <tr>
                                <td><strong>OP40</strong></td>
                                <td>Lochkreis 8√ó</td>
                                <td><span class="formula">8√ó45mm√ó9 H√ºbe</span></td>
                                <td>3,2</td>
                                <td>1,2</td>
                                <td class="result">4,4</td>
                                <td><div class="mini-progress"><div class="mini-progress-fill" style="width: 11%;"></div></div></td>
                            </tr>
                            <tr style="background: #fef3c7;">
                                <td><strong>OP50</strong></td>
                                <td>‚ö†Ô∏è Schlichten √ò120 h5</td>
                                <td><span class="formula">œÄ√ó120√ó42 / f=250</span></td>
                                <td>4,3</td>
                                <td>0,8</td>
                                <td class="result">5,1</td>
                                <td><div class="mini-progress"><div class="mini-progress-fill" style="width: 12%; background: var(--warning);"></div></div></td>
                            </tr>
                            <tr style="background: #fef3c7;">
                                <td><strong>OP60</strong></td>
                                <td>‚ö†Ô∏è Feinbohren √ò26 H7</td>
                                <td><span class="formula">45mm√ó3,3 / f=100</span></td>
                                <td>3,3</td>
                                <td>0,8</td>
                                <td class="result">4,1</td>
                                <td><div class="mini-progress"><div class="mini-progress-fill" style="width: 10%; background: var(--warning);"></div></div></td>
                            </tr>
                            <tr>
                                <td><strong>OP70</strong></td>
                                <td>Feinbohren √ò44 H7</td>
                                <td><span class="formula">15mm√ó3 / f=80</span></td>
                                <td>2,3</td>
                                <td>0,8</td>
                                <td class="result">3,1</td>
                                <td><div class="mini-progress"><div class="mini-progress-fill" style="width: 7%;"></div></div></td>
                            </tr>
                            <tr>
                                <td><strong>OP80</strong></td>
                                <td>Stufenfr√§sen</td>
                                <td><span class="formula">Tasche / f=300</span></td>
                                <td>3,1</td>
                                <td>0,8</td>
                                <td class="result">3,9</td>
                                <td><div class="mini-progress"><div class="mini-progress-fill" style="width: 9%;"></div></div></td>
                            </tr>
                            <tr>
                                <td><strong>OP90</strong></td>
                                <td>Gewindefr√§sen 4√ó</td>
                                <td><span class="formula">4√óœÄ√ó8√ó12 / f=200</span></td>
                                <td>2,4</td>
                                <td>1,0</td>
                                <td class="result">3,4</td>
                                <td><div class="mini-progress"><div class="mini-progress-fill" style="width: 8%;"></div></div></td>
                            </tr>
                            <tr>
                                <td><strong>OP100</strong></td>
                                <td>Anfasen</td>
                                <td><span class="formula">L=450mm / f=300</span></td>
                                <td>1,5</td>
                                <td>0,8</td>
                                <td class="result">2,3</td>
                                <td><div class="mini-progress"><div class="mini-progress-fill" style="width: 6%;"></div></div></td>
                            </tr>
                            <tr style="background: var(--gray-100); font-weight: 600;">
                                <td colspan="3" style="text-align: right;"><strong>Summe:</strong></td>
                                <td><strong>33,2</strong></td>
                                <td><strong>8,6</strong></td>
                                <td class="result"><strong>41,8 min</strong></td>
                                <td></td>
                            </tr>
                            <tr style="background: var(--success); color: white; font-weight: 600;">
                                <td colspan="5" style="text-align: right;"><strong>ERSTMUSTER (+30 min R√ºsten):</strong></td>
                                <td><strong>71,8 min</strong></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- Summary Cards -->
                    <div class="summary-grid">
                        <div class="summary-card">
                            <div class="summary-value">41,8</div>
                            <div class="summary-label">Min/Teil</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-value">71,8</div>
                            <div class="summary-label">Min Erstmuster</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-value">~14</div>
                            <div class="summary-label">Teile/Schicht</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-value">79%</div>
                            <div class="summary-label">Schnittzeit</div>
                        </div>
                    </div>
                </div>

                <!-- Werkzeugkosten -->
                <div class="calc-section" style="background: #fef9e6; border-left: 4px solid var(--warning);">
                    <h4>üîß Werkzeugkosten-Kalkulation</h4>
                    <table class="calc-table">
                        <thead>
                            <tr>
                                <th>Werkzeug</th>
                                <th>Preis</th>
                                <th>Standzeit</th>
                                <th>Einsatzzeit</th>
                                <th>Kosten/Teil</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>T1 ‚Äî Planfr√§ser √ò63 (WSP)</td>
                                <td>‚Ç¨45,00</td>
                                <td>60 min</td>
                                <td>1,9 min</td>
                                <td class="result">‚Ç¨1,43</td>
                            </tr>
                            <tr>
                                <td>T2 ‚Äî VHM-Schruppfr√§ser √ò20</td>
                                <td>‚Ç¨120,00</td>
                                <td>180 min</td>
                                <td>11,2 min</td>
                                <td class="result">‚Ç¨7,47</td>
                            </tr>
                            <tr>
                                <td>T3 ‚Äî VHM-Schlichtfr√§ser √ò16</td>
                                <td>‚Ç¨95,00</td>
                                <td>120 min</td>
                                <td>9,0 min</td>
                                <td class="result">‚Ç¨7,13</td>
                            </tr>
                            <tr>
                                <td>T8 ‚Äî VHM-Spiralbohrer √ò6,8</td>
                                <td>‚Ç¨28,00</td>
                                <td>200 min</td>
                                <td>3,2 min</td>
                                <td class="result">‚Ç¨0,45</td>
                            </tr>
                            <tr>
                                <td>T11 ‚Äî Ausdrehwerkzeug √ò26</td>
                                <td>‚Ç¨350,00</td>
                                <td>500 min</td>
                                <td>4,1 min</td>
                                <td class="result">‚Ç¨2,87</td>
                            </tr>
                            <tr>
                                <td>T13 ‚Äî Gewindefr√§ser M8</td>
                                <td>‚Ç¨65,00</td>
                                <td>200 min</td>
                                <td>3,4 min</td>
                                <td class="result">‚Ç¨1,11</td>
                            </tr>
                            <tr style="background: var(--gray-100);">
                                <td colspan="4" style="text-align: right;"><strong>Summe Werkzeugkosten:</strong></td>
                                <td class="result"><strong>‚Ç¨20,46</strong></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="tool-total">
                        <span class="tool-total-label">Werkzeugkosten pro Teil:</span>
                        <span class="tool-total-value">‚Ç¨20,46</span>
                    </div>
                </div>

                <!-- Gesamtkalkulation -->
                <div class="calc-section" style="background: linear-gradient(135deg, var(--primary), var(--primary-light)); color: white;">
                    <h4 style="color: white;">üí∞ Gesamtkalkulation pro Teil</h4>
                    <div class="cost-summary-grid">
                        <div class="cost-card">
                            <div class="cost-card-label">Maschinenzeit</div>
                            <div class="cost-card-value">‚Ç¨59,22</div>
                            <div class="cost-card-detail">41,8 min √ó ‚Ç¨85/h</div>
                        </div>
                        <div class="cost-card">
                            <div class="cost-card-label">Material</div>
                            <div class="cost-card-value">‚Ç¨45,00</div>
                            <div class="cost-card-detail">Rohteil √ò135√ó50</div>
                        </div>
                        <div class="cost-card">
                            <div class="cost-card-label">Werkzeuge</div>
                            <div class="cost-card-value">‚Ç¨20,46</div>
                            <div class="cost-card-detail">Verschlei√ü anteilig</div>
                        </div>
                        <div class="cost-card total">
                            <div class="cost-card-label">SELBSTKOSTEN</div>
                            <div class="cost-card-value">‚Ç¨124,68</div>
                            <div class="cost-card-detail">pro Teil</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ================ TAB: MASCHINENCODE ================ -->
            <div class="tab-panel" id="panel-code">
                <div style="display: flex; gap: 12px; margin-bottom: 20px;">
                    <button class="btn btn-secondary btn-sm active">Heidenhain TNC</button>
                    <button class="btn btn-secondary btn-sm">Siemens 840D</button>
                    <button class="btn btn-secondary btn-sm">Fanuc</button>
                    <button class="btn btn-primary btn-sm" style="margin-left: auto;" onclick="copyNCCode()">üìã Kopieren</button>
                    <button class="btn btn-accent btn-sm" onclick="downloadNCCode()">üíæ Download .H</button>
                </div>

                <div class="nc-code-block" id="ncCodeBlock"><span class="comment">; ============================================================</span>
<span class="comment">; NC-PROGRAMM: GRUNDPLATTE.H</span>
<span class="comment">; TEIL: Grundplatte Antriebseinheit (Zahnradpumpe)</span>
<span class="comment">; ZEICHNUNG: WCAD-15-02-2020</span>
<span class="comment">; WERKSTOFF: 1.4571 (Edelstahl V4A)</span>
<span class="comment">; MASCHINE: FEHLMANN VERSA 943 / Heidenhain TNC 640</span>
<span class="comment">; ERSTELLT: 02.02.2026</span>
<span class="comment">; BEARBEITUNGSZEIT: ca. 41,8 min/Teil</span>
<span class="comment">; ============================================================</span>

<span class="keyword">BEGIN PGM</span> GRUNDPLATTE <span class="keyword">MM</span>

<span class="comment">; --- WERKZEUG-DEFINITION ---</span>
<span class="comment">; T1  = Planfr√§ser √ò63 (5 WSP, APKT1604)</span>
<span class="comment">; T2  = VHM-Schruppfr√§ser √ò20 (4 Schneiden)</span>
<span class="comment">; T3  = VHM-Schlichtfr√§ser √ò16 (4 Schneiden)</span>
<span class="comment">; T4  = VHM-Schaftfr√§ser √ò12 (3 Schneiden)</span>
<span class="comment">; T8  = VHM-Spiralbohrer √ò6,8</span>
<span class="comment">; T10 = NC-Anbohrer 90¬∞ √ò3,15</span>
<span class="comment">; T11 = Ausdrehwerkzeug √ò26 H7</span>
<span class="comment">; T12 = Ausdrehwerkzeug √ò44 H7</span>
<span class="comment">; T13 = Gewindefr√§ser M8</span>
<span class="comment">; T15 = Fasenfr√§ser 45¬∞ √ò12</span>

<span class="comment">; --- NULLPUNKT & SICHERHEITSEBENE ---</span>
<span class="gcode">BLK FORM</span> <span class="number">0.1</span> <span class="gcode">Z</span> <span class="gcode">X-65</span> <span class="gcode">Y-65</span> <span class="gcode">Z-50</span>
<span class="gcode">BLK FORM</span> <span class="number">0.2</span> <span class="gcode">X+65</span> <span class="gcode">Y+65</span> <span class="gcode">Z+0</span>

<span class="comment">; Sicherheitsebene</span>
<span class="gcode">L</span> <span class="gcode">Z+100</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M3</span>

<span class="comment">; ============================================================</span>
<span class="comment">; OP10 - PLANFR√ÑSEN OBERSEITE</span>
<span class="comment">; Werkzeug: T1 √ò63 | n=800 | f=300 | ap=0,5</span>
<span class="comment">; Zeit: 2,7 min</span>
<span class="comment">; ============================================================</span>
<span class="tool">TOOL CALL</span> <span class="number">1</span> <span class="gcode">Z</span> <span class="gcode">S800</span>
<span class="gcode">L</span> <span class="gcode">X-80</span> <span class="gcode">Y+0</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span>
<span class="gcode">L</span> <span class="gcode">Z+2</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span>
<span class="gcode">L</span> <span class="gcode">Z-0.5</span> <span class="gcode">R0</span> <span class="gcode">F100</span> <span class="mcode">M8</span>
<span class="gcode">L</span> <span class="gcode">X+80</span> <span class="gcode">R0</span> <span class="gcode">F300</span>
<span class="gcode">L</span> <span class="gcode">Y+25</span> <span class="gcode">R0</span> <span class="gcode">F300</span>
<span class="gcode">L</span> <span class="gcode">X-80</span> <span class="gcode">R0</span> <span class="gcode">F300</span>
<span class="gcode">L</span> <span class="gcode">Y-25</span> <span class="gcode">R0</span> <span class="gcode">F300</span>
<span class="gcode">L</span> <span class="gcode">X+80</span> <span class="gcode">R0</span> <span class="gcode">F300</span>
<span class="gcode">L</span> <span class="gcode">Z+100</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M9</span>

<span class="comment">; ============================================================</span>
<span class="comment">; OP20 - SCHRUPPEN AUSSENKONTUR √ò120 (+0,3 Aufma√ü)</span>
<span class="comment">; Werkzeug: T2 √ò20 | n=2500 | f=400 | ap=3,0</span>
<span class="comment">; Zeit: 8,0 min</span>
<span class="comment">; ============================================================</span>
<span class="tool">TOOL CALL</span> <span class="number">2</span> <span class="gcode">Z</span> <span class="gcode">S2500</span>
<span class="gcode">L</span> <span class="gcode">X+0</span> <span class="gcode">Y+80</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span>
<span class="gcode">L</span> <span class="gcode">Z+2</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M8</span>

<span class="comment">; Schruppen Au√üen - Ebene 1 (Z-3)</span>
<span class="gcode">L</span> <span class="gcode">Z-3</span> <span class="gcode">R0</span> <span class="gcode">F150</span>
<span class="gcode">CC</span> <span class="gcode">X+0</span> <span class="gcode">Y+0</span>
<span class="gcode">C</span> <span class="gcode">X+0</span> <span class="gcode">Y+60.15</span> <span class="gcode">DR-</span> <span class="gcode">RL</span> <span class="gcode">F400</span>

<span class="gcode">CYCL DEF</span> <span class="number">256</span> <span class="gcode">RECHTECKTASCHE</span>
  <span class="gcode">Q218</span>=<span class="number">1</span>     <span class="comment">;1. SEITE</span>
  <span class="gcode">Q219</span>=<span class="number">0</span>     <span class="comment">;DREHWINKEL</span>
  <span class="gcode">Q220</span>=<span class="number">120.3</span> <span class="comment">;BREITE DER KONTUR</span>
  <span class="gcode">Q221</span>=<span class="number">120.3</span> <span class="comment">;L√ÑNGE DER KONTUR</span>
  <span class="gcode">Q222</span>=<span class="number">10</span>    <span class="comment">;ECKENRADIUS</span>
  <span class="gcode">Q368</span>=<span class="number">0.3</span>  <span class="comment">;AUFMASS SEITE</span>
  <span class="gcode">Q369</span>=<span class="number">0.1</span>  <span class="comment">;AUFMASS TIEFE</span>
  <span class="gcode">Q202</span>=<span class="number">-42</span>   <span class="comment">;TIEFE</span>
  <span class="gcode">Q206</span>=<span class="number">150</span>   <span class="comment">;VORSCHUB TIEFENZUSTELLUNG</span>
  <span class="gcode">Q207</span>=<span class="number">400</span>   <span class="comment">;VORSCHUB FR√ÑSEN</span>
  <span class="gcode">Q385</span>=<span class="number">400</span>   <span class="comment">;VORSCHUB SCHLICHTEN</span>
<span class="gcode">CYCL CALL</span>
<span class="gcode">L</span> <span class="gcode">Z+100</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M9</span>

<span class="comment">; ============================================================</span>
<span class="comment">; OP30 - SCHRUPPEN INNENBOHRUNG √ò26 (+0,2 Aufma√ü)</span>
<span class="comment">; Werkzeug: T4 √ò12 | n=3000 | f=350</span>
<span class="comment">; Zeit: 4,8 min</span>
<span class="comment">; ============================================================</span>
<span class="tool">TOOL CALL</span> <span class="number">4</span> <span class="gcode">Z</span> <span class="gcode">S3000</span>
<span class="gcode">L</span> <span class="gcode">X+0</span> <span class="gcode">Y+0</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span>
<span class="gcode">L</span> <span class="gcode">Z+2</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M8</span>

<span class="gcode">CYCL DEF</span> <span class="number">253</span> <span class="gcode">NUT FR√ÑSEN</span>
  <span class="gcode">Q215</span>=<span class="number">0</span>      <span class="comment">;BEARBEITUNGSART</span>
  <span class="gcode">Q223</span>=<span class="number">25.8</span>  <span class="comment">;KREIS-DURCHMESSER</span>
  <span class="gcode">Q368</span>=<span class="number">0.2</span>   <span class="comment">;AUFMASS SEITE</span>
  <span class="gcode">Q202</span>=<span class="number">-45</span>    <span class="comment">;TIEFE</span>
  <span class="gcode">Q369</span>=<span class="number">0.1</span>   <span class="comment">;AUFMASS TIEFE</span>
  <span class="gcode">Q206</span>=<span class="number">150</span>    <span class="comment">;VORSCHUB TIEFENZUSTELLUNG</span>
  <span class="gcode">Q207</span>=<span class="number">350</span>    <span class="comment">;VORSCHUB FR√ÑSEN</span>
<span class="gcode">CYCL CALL</span>
<span class="gcode">L</span> <span class="gcode">Z+100</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M9</span>

<span class="comment">; ============================================================</span>
<span class="comment">; OP40 - LOCHKREIS BOHREN (8√ó √ò6,8 auf LK √ò52)</span>
<span class="comment">; Werkzeug: T10 (Anbohren) + T8 (Bohren)</span>
<span class="comment">; Zeit: 4,4 min</span>
<span class="comment">; ============================================================</span>

<span class="comment">; Anbohren</span>
<span class="tool">TOOL CALL</span> <span class="number">10</span> <span class="gcode">Z</span> <span class="gcode">S3000</span>
<span class="gcode">CYCL DEF</span> <span class="number">200</span> <span class="gcode">BOHREN</span>
  <span class="gcode">Q200</span>=<span class="number">2</span>    <span class="comment">;SICHERHEITS-ABSTAND</span>
  <span class="gcode">Q201</span>=<span class="number">-2</span>   <span class="comment">;TIEFE</span>
  <span class="gcode">Q206</span>=<span class="number">150</span>  <span class="comment">;VORSCHUB TIEFENZUSTELLUNG</span>
  <span class="gcode">Q211</span>=<span class="number">0</span>    <span class="comment">;VERWEILZEIT UNTEN</span>
<span class="gcode">CYCL DEF</span> <span class="number">220</span> <span class="gcode">MUSTER KREIS</span>
  <span class="gcode">Q216</span>=<span class="number">0</span>    <span class="comment">;MITTE 1. ACHSE</span>
  <span class="gcode">Q217</span>=<span class="number">0</span>    <span class="comment">;MITTE 2. ACHSE</span>
  <span class="gcode">Q244</span>=<span class="number">52</span>   <span class="comment">;LOCHKREIS-DURCHMESSER</span>
  <span class="gcode">Q245</span>=<span class="number">0</span>    <span class="comment">;STARTWINKEL</span>
  <span class="gcode">Q246</span>=<span class="number">360</span>  <span class="comment">;ENDWINKEL</span>
  <span class="gcode">Q247</span>=<span class="number">45</span>   <span class="comment">;WINKELSCHRITT</span>
  <span class="gcode">Q241</span>=<span class="number">8</span>    <span class="comment">;ANZAHL</span>
<span class="gcode">CYCL CALL</span> <span class="mcode">M8</span>
<span class="gcode">L</span> <span class="gcode">Z+100</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M9</span>

<span class="comment">; Bohren √ò6,8</span>
<span class="tool">TOOL CALL</span> <span class="number">8</span> <span class="gcode">Z</span> <span class="gcode">S2800</span>
<span class="gcode">CYCL DEF</span> <span class="number">203</span> <span class="gcode">UNIVERSAL-BOHREN</span>
  <span class="gcode">Q200</span>=<span class="number">2</span>     <span class="comment">;SICHERHEITS-ABSTAND</span>
  <span class="gcode">Q201</span>=<span class="number">-47</span>   <span class="comment">;TIEFE (DURCHGANG)</span>
  <span class="gcode">Q206</span>=<span class="number">180</span>   <span class="comment">;VORSCHUB TIEFENZUSTELLUNG</span>
  <span class="gcode">Q202</span>=<span class="number">8</span>     <span class="comment">;TIEFENZUSTELLUNG</span>
  <span class="gcode">Q210</span>=<span class="number">0</span>     <span class="comment">;VERWEILZEIT OBEN</span>
  <span class="gcode">Q211</span>=<span class="number">0.3</span>   <span class="comment">;VERWEILZEIT UNTEN</span>
  <span class="gcode">Q395</span>=<span class="number">0</span>     <span class="comment">;TIEFENREFERENZ</span>
<span class="gcode">CYCL DEF</span> <span class="number">220</span> <span class="gcode">MUSTER KREIS</span>
  <span class="gcode">Q216</span>=<span class="number">0</span>    <span class="comment">;MITTE 1. ACHSE</span>
  <span class="gcode">Q217</span>=<span class="number">0</span>    <span class="comment">;MITTE 2. ACHSE</span>
  <span class="gcode">Q244</span>=<span class="number">52</span>   <span class="comment">;LOCHKREIS-DURCHMESSER</span>
  <span class="gcode">Q245</span>=<span class="number">0</span>    <span class="comment">;STARTWINKEL</span>
  <span class="gcode">Q246</span>=<span class="number">360</span>  <span class="comment">;ENDWINKEL</span>
  <span class="gcode">Q247</span>=<span class="number">45</span>   <span class="comment">;WINKELSCHRITT</span>
  <span class="gcode">Q241</span>=<span class="number">8</span>    <span class="comment">;ANZAHL</span>
<span class="gcode">CYCL CALL</span> <span class="mcode">M8</span>
<span class="gcode">L</span> <span class="gcode">Z+100</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M9</span>

<span class="comment">; ============================================================</span>
<span class="comment">; OP50 - SCHLICHTEN AUSSENKONTUR √ò120 h5 **KRITISCH**</span>
<span class="comment">; Werkzeug: T3 √ò16 | n=3500 | f=250</span>
<span class="comment">; Toleranz: h5 (0 / -0,013)</span>
<span class="comment">; Zeit: 5,1 min</span>
<span class="comment">; ============================================================</span>
<span class="tool">TOOL CALL</span> <span class="number">3</span> <span class="gcode">Z</span> <span class="gcode">S3500</span>
<span class="gcode">L</span> <span class="gcode">X+0</span> <span class="gcode">Y+75</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span>
<span class="gcode">L</span> <span class="gcode">Z+2</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M8</span>
<span class="gcode">L</span> <span class="gcode">Z-42</span> <span class="gcode">R0</span> <span class="gcode">F150</span>

<span class="comment">; Schlichtkontur √ò120 (Radius 60)</span>
<span class="gcode">L</span> <span class="gcode">X+0</span> <span class="gcode">Y+68</span> <span class="gcode">RL</span> <span class="gcode">F250</span>
<span class="gcode">CC</span> <span class="gcode">X+0</span> <span class="gcode">Y+0</span>
<span class="gcode">C</span> <span class="gcode">X+0</span> <span class="gcode">Y+60</span> <span class="gcode">DR-</span> <span class="gcode">RL</span> <span class="gcode">F250</span>
<span class="gcode">C</span> <span class="gcode">X+0</span> <span class="gcode">Y+60</span> <span class="gcode">DR-</span> <span class="gcode">RL</span> <span class="gcode">F250</span>
<span class="gcode">L</span> <span class="gcode">Y+68</span> <span class="gcode">R0</span> <span class="gcode">F250</span>
<span class="gcode">L</span> <span class="gcode">Z+100</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M9</span>

<span class="comment">; ============================================================</span>
<span class="comment">; OP60 - FEINBOHREN √ò26 H7 **KRITISCH**</span>
<span class="comment">; Werkzeug: T11 Ausdrehwerkzeug | n=1500 | f=100</span>
<span class="comment">; Toleranz: H7 (+0,021 / 0)</span>
<span class="comment">; Zeit: 4,1 min</span>
<span class="comment">; ============================================================</span>
<span class="tool">TOOL CALL</span> <span class="number">11</span> <span class="gcode">Z</span> <span class="gcode">S1500</span>
<span class="gcode">L</span> <span class="gcode">X+0</span> <span class="gcode">Y+0</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span>
<span class="gcode">L</span> <span class="gcode">Z+2</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M8</span>
<span class="gcode">CYCL DEF</span> <span class="number">201</span> <span class="gcode">REIBEN</span>
  <span class="gcode">Q200</span>=<span class="number">2</span>    <span class="comment">;SICHERHEITS-ABSTAND</span>
  <span class="gcode">Q201</span>=<span class="number">-45</span>  <span class="comment">;TIEFE</span>
  <span class="gcode">Q206</span>=<span class="number">100</span>  <span class="comment">;VORSCHUB TIEFENZUSTELLUNG</span>
  <span class="gcode">Q211</span>=<span class="number">0.5</span>  <span class="comment">;VERWEILZEIT UNTEN</span>
  <span class="gcode">Q208</span>=<span class="number">200</span>  <span class="comment">;VORSCHUB R√úCKZUG</span>
<span class="gcode">CYCL CALL</span>
<span class="gcode">L</span> <span class="gcode">Z+100</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M9</span>

<span class="comment">; ============================================================</span>
<span class="comment">; OP70 - FEINBOHREN √ò44 H7</span>
<span class="comment">; Werkzeug: T12 Ausdrehwerkzeug | n=1200 | f=80</span>
<span class="comment">; Tiefe: 15mm (Stufe)</span>
<span class="comment">; Zeit: 3,1 min</span>
<span class="comment">; ============================================================</span>
<span class="tool">TOOL CALL</span> <span class="number">12</span> <span class="gcode">Z</span> <span class="gcode">S1200</span>
<span class="gcode">L</span> <span class="gcode">X+0</span> <span class="gcode">Y+0</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span>
<span class="gcode">L</span> <span class="gcode">Z+2</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M8</span>
<span class="gcode">CYCL DEF</span> <span class="number">201</span> <span class="gcode">REIBEN</span>
  <span class="gcode">Q200</span>=<span class="number">2</span>    <span class="comment">;SICHERHEITS-ABSTAND</span>
  <span class="gcode">Q201</span>=<span class="number">-15</span>  <span class="comment">;TIEFE (STUFE)</span>
  <span class="gcode">Q206</span>=<span class="number">80</span>   <span class="comment">;VORSCHUB TIEFENZUSTELLUNG</span>
  <span class="gcode">Q211</span>=<span class="number">0.5</span>  <span class="comment">;VERWEILZEIT UNTEN</span>
  <span class="gcode">Q208</span>=<span class="number">200</span>  <span class="comment">;VORSCHUB R√úCKZUG</span>
<span class="gcode">CYCL CALL</span>
<span class="gcode">L</span> <span class="gcode">Z+100</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M9</span>

<span class="comment">; ============================================================</span>
<span class="comment">; OP80 - STUFE FR√ÑSEN (Tiefe 15mm, √ò44)</span>
<span class="comment">; Werkzeug: T3 √ò16 | n=3000 | f=300</span>
<span class="comment">; Zeit: 3,9 min</span>
<span class="comment">; ============================================================</span>
<span class="tool">TOOL CALL</span> <span class="number">3</span> <span class="gcode">Z</span> <span class="gcode">S3000</span>
<span class="gcode">L</span> <span class="gcode">X+0</span> <span class="gcode">Y+0</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span>
<span class="gcode">L</span> <span class="gcode">Z+2</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M8</span>

<span class="gcode">CYCL DEF</span> <span class="number">253</span> <span class="gcode">NUT FR√ÑSEN</span>
  <span class="gcode">Q215</span>=<span class="number">0</span>     <span class="comment">;BEARBEITUNGSART</span>
  <span class="gcode">Q223</span>=<span class="number">44</span>   <span class="comment">;KREIS-DURCHMESSER</span>
  <span class="gcode">Q368</span>=<span class="number">0</span>    <span class="comment">;AUFMASS SEITE</span>
  <span class="gcode">Q202</span>=<span class="number">-15</span>   <span class="comment">;TIEFE</span>
  <span class="gcode">Q369</span>=<span class="number">0</span>    <span class="comment">;AUFMASS TIEFE</span>
  <span class="gcode">Q206</span>=<span class="number">150</span>   <span class="comment">;VORSCHUB TIEFENZUSTELLUNG</span>
  <span class="gcode">Q207</span>=<span class="number">300</span>   <span class="comment">;VORSCHUB FR√ÑSEN</span>
<span class="gcode">CYCL CALL</span>
<span class="gcode">L</span> <span class="gcode">Z+100</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M9</span>

<span class="comment">; ============================================================</span>
<span class="comment">; OP90 - GEWINDEFR√ÑSEN M8√ó1,25 (4√ó auf LK √ò52)</span>
<span class="comment">; Werkzeug: T13 Gewindefr√§ser | n=2000 | f=200</span>
<span class="comment">; Zeit: 3,4 min</span>
<span class="comment">; ============================================================</span>
<span class="tool">TOOL CALL</span> <span class="number">13</span> <span class="gcode">Z</span> <span class="gcode">S2000</span>

<span class="gcode">CYCL DEF</span> <span class="number">262</span> <span class="gcode">GEWINDEFR√ÑSEN</span>
  <span class="gcode">Q335</span>=<span class="number">8</span>     <span class="comment">;NENN-DURCHMESSER</span>
  <span class="gcode">Q239</span>=<span class="number">1.25</span>  <span class="comment">;STEIGUNG</span>
  <span class="gcode">Q201</span>=<span class="number">-20</span>   <span class="comment">;TIEFE</span>
  <span class="gcode">Q355</span>=<span class="number">1</span>     <span class="comment">;ANZAHL G√ÑNGE</span>
  <span class="gcode">Q253</span>=<span class="number">200</span>   <span class="comment">;VORSCHUB VOR-POSITIONIEREN</span>
  <span class="gcode">Q351</span>=<span class="number">1</span>     <span class="comment">;ART FR√ÑSEN (+1=GLEICHLAUF)</span>
  <span class="gcode">Q200</span>=<span class="number">2</span>     <span class="comment">;SICHERHEITS-ABSTAND</span>

<span class="comment">; Gewinde 1 (0¬∞)</span>
<span class="gcode">L</span> <span class="gcode">X+26</span> <span class="gcode">Y+0</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M8</span>
<span class="gcode">CYCL CALL</span>
<span class="comment">; Gewinde 2 (90¬∞)</span>
<span class="gcode">L</span> <span class="gcode">X+0</span> <span class="gcode">Y+26</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span>
<span class="gcode">CYCL CALL</span>
<span class="comment">; Gewinde 3 (180¬∞)</span>
<span class="gcode">L</span> <span class="gcode">X-26</span> <span class="gcode">Y+0</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span>
<span class="gcode">CYCL CALL</span>
<span class="comment">; Gewinde 4 (270¬∞)</span>
<span class="gcode">L</span> <span class="gcode">X+0</span> <span class="gcode">Y-26</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span>
<span class="gcode">CYCL CALL</span>
<span class="gcode">L</span> <span class="gcode">Z+100</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M9</span>

<span class="comment">; ============================================================</span>
<span class="comment">; OP100 - ANFASEN 0,5√ó45¬∞</span>
<span class="comment">; Werkzeug: T15 Fasenfr√§ser 45¬∞ | n=4000 | f=300</span>
<span class="comment">; Zeit: 2,3 min</span>
<span class="comment">; ============================================================</span>
<span class="tool">TOOL CALL</span> <span class="number">15</span> <span class="gcode">Z</span> <span class="gcode">S4000</span>

<span class="comment">; Fase Au√üenkontur</span>
<span class="gcode">L</span> <span class="gcode">X+0</span> <span class="gcode">Y+68</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span>
<span class="gcode">L</span> <span class="gcode">Z+0.5</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M8</span>
<span class="gcode">CC</span> <span class="gcode">X+0</span> <span class="gcode">Y+0</span>
<span class="gcode">C</span> <span class="gcode">X+0</span> <span class="gcode">Y+60</span> <span class="gcode">DR-</span> <span class="gcode">RL</span> <span class="gcode">F300</span>
<span class="gcode">C</span> <span class="gcode">X+0</span> <span class="gcode">Y+60</span> <span class="gcode">DR-</span> <span class="gcode">RL</span> <span class="gcode">F300</span>

<span class="comment">; Fase Bohrungen auf Lochkreis</span>
<span class="gcode">CYCL DEF</span> <span class="number">220</span> <span class="gcode">MUSTER KREIS</span>
  <span class="gcode">Q216</span>=<span class="number">0</span>    <span class="comment">;MITTE 1. ACHSE</span>
  <span class="gcode">Q217</span>=<span class="number">0</span>    <span class="comment">;MITTE 2. ACHSE</span>
  <span class="gcode">Q244</span>=<span class="number">52</span>   <span class="comment">;LOCHKREIS-DURCHMESSER</span>
  <span class="gcode">Q245</span>=<span class="number">0</span>    <span class="comment">;STARTWINKEL</span>
  <span class="gcode">Q246</span>=<span class="number">360</span>  <span class="comment">;ENDWINKEL</span>
  <span class="gcode">Q247</span>=<span class="number">45</span>   <span class="comment">;WINKELSCHRITT</span>
  <span class="gcode">Q241</span>=<span class="number">8</span>    <span class="comment">;ANZAHL</span>

<span class="gcode">CYCL DEF</span> <span class="number">200</span> <span class="gcode">BOHREN</span>
  <span class="gcode">Q200</span>=<span class="number">2</span>    <span class="comment">;SICHERHEITS-ABSTAND</span>
  <span class="gcode">Q201</span>=<span class="number">-0.5</span> <span class="comment">;TIEFE FASE</span>
  <span class="gcode">Q206</span>=<span class="number">300</span>  <span class="comment">;VORSCHUB</span>
  <span class="gcode">Q211</span>=<span class="number">0</span>    <span class="comment">;VERWEILZEIT</span>
<span class="gcode">CYCL CALL</span>
<span class="gcode">L</span> <span class="gcode">Z+100</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M9</span>

<span class="comment">; ============================================================</span>
<span class="comment">; PROGRAMMENDE</span>
<span class="comment">; ============================================================</span>
<span class="gcode">L</span> <span class="gcode">Z+150</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span>
<span class="gcode">L</span> <span class="gcode">X+0</span> <span class="gcode">Y+150</span> <span class="gcode">R0</span> <span class="gcode">FMAX</span> <span class="mcode">M5</span> <span class="mcode">M9</span>
<span class="mcode">M30</span>

<span class="keyword">END PGM</span> GRUNDPLATTE <span class="keyword">MM</span></div>

                <div style="margin-top: 20px; padding: 16px; background: var(--gray-50); border-radius: var(--radius); font-size: 0.85rem; display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px;">
                    <div>
                        <div style="color: var(--gray-500); font-size: 0.75rem;">Programmname</div>
                        <div style="font-family: 'JetBrains Mono', monospace;">GRUNDPLATTE.H</div>
                    </div>
                    <div>
                        <div style="color: var(--gray-500); font-size: 0.75rem;">Steuerung</div>
                        <div>Heidenhain TNC 640</div>
                    </div>
                    <div>
                        <div style="color: var(--gray-500); font-size: 0.75rem;">Werkzeuge</div>
                        <div>10 (T1‚ÄìT15)</div>
                    </div>
                    <div>
                        <div style="color: var(--gray-500); font-size: 0.75rem;">Zyklen</div>
                        <div>200, 201, 203, 220, 253, 256, 262</div>
                    </div>
                </div>
            </div>

            <!-- ================ TAB: FERTIGUNGSANWEISUNG ================ -->
            <div class="tab-panel" id="panel-instructions">
                <!-- Feedback Panel -->
                <div class="feedback-panel">
                    <div style="display: flex; align-items: center;">
                        <h4>üí¨ Werkstatt-Feedback</h4>
                        <button class="feedback-toggle" onclick="toggleFeedback()">+ Feedback geben</button>
                    </div>

                    <!-- Previous Feedback -->
                    <div class="feedback-history">
                        <div class="feedback-item">
                            <div class="feedback-item-header">
                                <span><strong>M. Schmidt</strong> | Schicht 2 | 01.02.2026</span>
                                <span class="feedback-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span>
                            </div>
                            <div>
                                <span class="feedback-tag">OP50</span>
                                Bei √ò120 h5 besser mit 3200 U/min statt 3500 fahren - weniger Rattern bei unserer Charge.
                            </div>
                        </div>
                        <div class="feedback-item">
                            <div class="feedback-item-header">
                                <span><strong>K. Weber</strong> | Schicht 1 | 31.01.2026</span>
                                <span class="feedback-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                            </div>
                            <div>
                                <span class="feedback-tag">Allgemein</span>
                                Sehr gute Anweisung! Zeitangaben stimmen gut. T8 (Bohrer) nach 12 Teilen gewechselt.
                            </div>
                        </div>
                    </div>

                    <!-- Feedback Form -->
                    <div class="feedback-form" id="feedbackForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Name / Personalnummer</label>
                                <input type="text" placeholder="z.B. M. M√ºller / 12345">
                            </div>
                            <div class="form-group">
                                <label>Schicht / Datum</label>
                                <input type="text" placeholder="z.B. Schicht 1 / 02.02.2026">
                            </div>
                            <div class="form-group">
                                <label>Betroffene Operation</label>
                                <select>
                                    <option>Allgemein</option>
                                    <option>OP10 - Planfr√§sen</option>
                                    <option>OP20 - Schruppen Au√üen</option>
                                    <option>OP50 - Schlichten √ò120 h5</option>
                                    <option>OP60 - Feinbohren √ò26 H7</option>
                                    <option>Werkzeuge</option>
                                    <option>Zeitangaben</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Bewertung</label>
                                <div class="rating-stars" id="ratingStars">
                                    <span onclick="setRating(1)">‚òÜ</span>
                                    <span onclick="setRating(2)">‚òÜ</span>
                                    <span onclick="setRating(3)">‚òÜ</span>
                                    <span onclick="setRating(4)">‚òÜ</span>
                                    <span onclick="setRating(5)">‚òÜ</span>
                                </div>
                            </div>
                            <div class="form-group" style="grid-column: 1 / -1;">
                                <label>Feedback / Verbesserungsvorschlag</label>
                                <textarea style="width: 100%; padding: 10px; border: none; border-radius: var(--radius); font-size: 0.9rem; min-height: 80px;" placeholder="Beschreiben Sie Ihr Feedback..."></textarea>
                            </div>
                        </div>
                        <button class="generate-btn" onclick="submitFeedback()">üì§ Feedback absenden</button>
                    </div>
                </div>

                <!-- Korrekturwerte -->
                <h4 style="margin-bottom: 16px; color: var(--gray-700);">üîß Aktuelle Korrekturwerte</h4>
                <div class="correction-grid">
                    <div class="correction-card">
                        <h5>√ò120 h5</h5>
                        <div class="correction-value">+0,008</div>
                        <div class="correction-unit">mm</div>
                        <div class="correction-note">Letztes Update: 01.02.2026</div>
                    </div>
                    <div class="correction-card">
                        <h5>√ò26 H7</h5>
                        <div class="correction-value">-0,003</div>
                        <div class="correction-unit">mm</div>
                        <div class="correction-note">Letztes Update: 31.01.2026</div>
                    </div>
                    <div class="correction-card">
                        <h5>√ò44 H7</h5>
                        <div class="correction-value">+0,000</div>
                        <div class="correction-unit">mm</div>
                        <div class="correction-note">Kein Korrekturwert n√∂tig</div>
                    </div>
                </div>

                <!-- Document Header -->
                <div style="background: var(--gray-50); border: 1px solid var(--gray-200); border-radius: var(--radius); padding: 24px; margin-bottom: 24px;">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 3px solid var(--primary);">
                        <div>
                            <h3 style="color: var(--primary); font-size: 1.4rem; font-weight: 700;">FERTIGUNGSANWEISUNG</h3>
                            <p style="color: var(--gray-500);">Grundplatte ‚Äî WCAD-15-02-2020</p>
                        </div>
                        <div style="text-align: right;">
                            <span class="ai-badge">KI-generiert</span>
                            <div style="font-size: 0.85rem; color: var(--gray-500); margin-top: 8px;">Version 1.0 | 02.02.2026</div>
                        </div>
                    </div>

                    <div class="info-grid">
                        <div>
                            <h4 style="color: var(--gray-700); font-size: 0.9rem; margin-bottom: 12px;">Werkst√ºck</h4>
                            <table class="info-table">
                                <tr><td>Werkstoff:</td><td><strong>1.4571</strong> (X6CrNiMoTi17-12-2)</td></tr>
                                <tr><td>Rohteil:</td><td>√ò135 √ó 50 mm</td></tr>
                                <tr><td>Fertigma√ü:</td><td>√ò120 √ó 42 mm</td></tr>
                                <tr><td>Gewicht:</td><td>1,903 kg</td></tr>
                            </table>
                        </div>
                        <div>
                            <h4 style="color: var(--gray-700); font-size: 0.9rem; margin-bottom: 12px;">Maschine</h4>
                            <table class="info-table">
                                <tr><td>Maschine:</td><td><strong>FEHLMANN VERSA 943</strong></td></tr>
                                <tr><td>Steuerung:</td><td>Heidenhain TNC 640</td></tr>
                                <tr><td>Programm:</td><td>GRUNDPLATTE.H</td></tr>
                                <tr><td>Bearbeitungszeit:</td><td><strong>41,8 min</strong></td></tr>
                            </table>
                        </div>
                    </div>

                    <div class="warning-box">
                        <strong>Kritische Toleranzen:</strong>
                        <span>√ò120 h5 (0/-0,018mm) ‚Ä¢ √ò26 H7 (+0,021/0) ‚Ä¢ √ò44 H7 (+0,025/0)</span>
                    </div>
                </div>

                <!-- Checkliste -->
                <h4 style="margin-bottom: 16px; color: var(--gray-700);">‚úÖ Checkliste vor dem Start</h4>
                <ul class="checklist" style="margin-bottom: 24px;">
                    <li onclick="toggleCheck(this)"><span class="checkbox"></span> Werkst√ºck korrekt gespannt und ausgerichtet</li>
                    <li onclick="toggleCheck(this)"><span class="checkbox"></span> Nullpunkt angetastet und dokumentiert</li>
                    <li onclick="toggleCheck(this)"><span class="checkbox"></span> Alle Werkzeuge auf Verschlei√ü gepr√ºft</li>
                    <li onclick="toggleCheck(this)"><span class="checkbox"></span> K√ºhlmittelstand und -druck OK</li>
                    <li onclick="toggleCheck(this)"><span class="checkbox"></span> NC-Programm in Simulation gepr√ºft</li>
                </ul>

                <!-- OP50 Critical -->
                <div class="instruction-section critical">
                    <div class="instruction-header critical">
                        <h4>
                            <span class="op-badge critical">OP50</span>
                            Schlichten √ò120 h5
                            <span class="badge badge-critical">KRITISCH</span>
                        </h4>
                        <span style="color: var(--gray-500); font-size: 0.85rem;">5,1 min</span>
                    </div>
                    <div class="instruction-content">
                        <div class="params-grid">
                            <div class="param-item">
                                <div class="param-label">Werkzeug</div>
                                <div class="param-value">T3 √ò16</div>
                            </div>
                            <div class="param-item">
                                <div class="param-label">Drehzahl</div>
                                <div class="param-value">3500</div>
                            </div>
                            <div class="param-item">
                                <div class="param-label">Vorschub</div>
                                <div class="param-value">250</div>
                            </div>
                            <div class="param-item" style="border-color: var(--danger);">
                                <div class="param-label">Toleranz</div>
                                <div class="param-value" style="color: var(--danger);">h5</div>
                            </div>
                        </div>
                        <div style="background: #fef2f2; border-radius: var(--radius); padding: 12px; margin-bottom: 12px;">
                            <strong style="color: var(--danger); font-size: 0.85rem;">Toleranz h5 = 0 / -0,018 mm ‚Äî Nur 18 ¬µm Spielraum!</strong>
                        </div>
                        <ul class="tips-list">
                            <li><span class="tip-icon danger">!</span> <strong>Werkzeug vor Bearbeitung auf Verschlei√ü pr√ºfen</strong></li>
                            <li><span class="tip-icon danger">!</span> Werkst√ºck-Temperatur beachten: Ausdehnung bei 20¬∞C Abweichung = ~2 ¬µm</li>
                            <li><span class="tip-icon warning">!</span> Nach Schlichtgang sofort messen ‚Äî nicht ausk√ºhlen lassen</li>
                            <li><span class="tip-icon success">‚úì</span> Ziel-Rauheit: Ra 1,6</li>
                        </ul>
                    </div>
                </div>

                <!-- Quality Check -->
                <h4 style="margin: 24px 0 16px; color: var(--gray-700);">üìã Qualit√§tspr√ºfung</h4>
                <table class="quality-table">
                    <thead>
                        <tr>
                            <th>Pr√ºfmerkmal</th>
                            <th>Soll</th>
                            <th>Pr√ºfmittel</th>
                            <th>Gepr√ºft</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>√ò120 h5</td>
                            <td>120,000 / 119,982</td>
                            <td>Mikrometer</td>
                            <td class="check" onclick="this.innerText = this.innerText === '‚ñ°' ? '‚òë' : '‚ñ°'">‚ñ°</td>
                        </tr>
                        <tr>
                            <td>√ò26 H7</td>
                            <td>26,000 / 26,021</td>
                            <td>Innenmessschraube</td>
                            <td class="check" onclick="this.innerText = this.innerText === '‚ñ°' ? '‚òë' : '‚ñ°'">‚ñ°</td>
                        </tr>
                        <tr>
                            <td>√ò44 H7</td>
                            <td>44,000 / 44,025</td>
                            <td>Innenmessschraube</td>
                            <td class="check" onclick="this.innerText = this.innerText === '‚ñ°' ? '‚òë' : '‚ñ°'">‚ñ°</td>
                        </tr>
                        <tr>
                            <td>H√∂he 42 mm</td>
                            <td>42,0 ¬±0,1</td>
                            <td>H√∂henmessschieber</td>
                            <td class="check" onclick="this.innerText = this.innerText === '‚ñ°' ? '‚òë' : '‚ñ°'">‚ñ°</td>
                        </tr>
                        <tr>
                            <td>Ra Oberfl√§che</td>
                            <td>‚â§ 1,6 ¬µm</td>
                            <td>Rauheitsmessger√§t</td>
                            <td class="check" onclick="this.innerText = this.innerText === '‚ñ°' ? '‚òë' : '‚ñ°'">‚ñ°</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
    // Project Data
    const projects = {
        grundplatte: {
            name: 'Grundplatte WCAD-15-02-2020',
            time: 41.8,
            material: '1.4571',
            cost: 122.07
        },
        lagerbock: {
            name: 'Lagerbock WZ-2024-118',
            time: 28.5,
            material: '42CrMo4',
            cost: 85.20
        },
        flansch: {
            name: 'Flansch FL-889',
            time: 18.2,
            material: 'S355',
            cost: 48.50
        }
    };

    let currentRating = 0;

    // Tab Switching
    function showTab(tabName) {
        document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.app-tab').forEach(t => t.classList.remove('active'));
        document.getElementById('panel-' + tabName).classList.add('active');
        event.target.classList.add('active');
    }

    // Load Project
    function loadProject(projectId) {
        document.querySelectorAll('.project-card').forEach(c => c.classList.remove('active'));
        event.currentTarget.classList.add('active');
        // In a real app, this would load the project data
        console.log('Loading project:', projectId);
    }

    // Generate Quote
    function generateQuote() {
        const qty = parseInt(document.getElementById('quantity').value) || 10;
        const machineRate = parseFloat(document.getElementById('machineRate').value) || 85;
        const materialCost = parseFloat(document.getElementById('materialCost').value) || 45;
        const materialMarkup = parseFloat(document.getElementById('materialMarkup').value) || 15;
        const profitMargin = parseFloat(document.getElementById('profitMargin').value) || 20;
        const deliveryWeeks = parseInt(document.getElementById('deliveryWeeks').value) || 3;

        const timePerPart = 41.8;
        const setupTime = 30;
        const machiningCost = (timePerPart / 60) * machineRate;
        const materialWithMarkup = materialCost * (1 + materialMarkup / 100);
        const costPerPart = machiningCost + materialWithMarkup;
        const pricePerPart = costPerPart * (1 + profitMargin / 100);
        const setupCost = (setupTime / 60) * machineRate;

        const subtotal = pricePerPart * qty;
        const netTotal = subtotal + setupCost;
        const vat = netTotal * 0.19;
        const grossTotal = netTotal + vat;

        // Update display
        document.getElementById('quoteQty').textContent = qty;
        document.getElementById('quoteQty2').textContent = qty;
        document.getElementById('quotePricePerPart').textContent = pricePerPart.toFixed(2);
        document.getElementById('quoteSubtotalParts').textContent = subtotal.toFixed(2).replace('.', ',');
        document.getElementById('quoteSubtotal').textContent = subtotal.toFixed(2).replace('.', ',') + ' ‚Ç¨';
        document.getElementById('quoteSetup').textContent = setupCost.toFixed(2).replace('.', ',') + ' ‚Ç¨';
        document.getElementById('quoteNet').textContent = netTotal.toFixed(2).replace('.', ',') + ' ‚Ç¨';
        document.getElementById('quoteVat').textContent = vat.toFixed(2).replace('.', ',') + ' ‚Ç¨';
        document.getElementById('quoteGross').textContent = grossTotal.toFixed(2).replace('.', ',') + ' ‚Ç¨';
        document.getElementById('quoteDelivery').textContent = deliveryWeeks + '-' + (deliveryWeeks + 1);

        const today = new Date();
        const validUntil = new Date(today);
        validUntil.setDate(validUntil.getDate() + 30);
        document.getElementById('quoteDate').textContent = today.toLocaleDateString('de-DE');
        document.getElementById('quoteValidUntil').textContent = validUntil.toLocaleDateString('de-DE');

        document.getElementById('quoteOutput').scrollIntoView({ behavior: 'smooth' });
    }

    // Copy Quote
    function copyQuote() {
        const quoteText = document.getElementById('quoteOutput').innerText;
        navigator.clipboard.writeText(quoteText).then(() => {
            alert('‚úÖ Angebot kopiert!');
        });
    }

    // Copy NC Code
    function copyNCCode() {
        const codeText = document.getElementById('ncCodeBlock').innerText;
        navigator.clipboard.writeText(codeText).then(() => {
            alert('‚úÖ NC-Code kopiert!');
        });
    }

    // Download NC Code
    function downloadNCCode() {
        const codeText = document.getElementById('ncCodeBlock').innerText;
        const blob = new Blob([codeText], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'GRUNDPLATTE.H';
        a.click();
        URL.revokeObjectURL(url);
    }

    // Export CSV
    function exportCSV() {
        const data = [
            ['OP', 'Beschreibung', 't_h (min)', 't_n (min)', 'Gesamt (min)'],
            ['OP10', 'Planfr√§sen', '1,9', '0,8', '2,7'],
            ['OP20', 'Schruppen Au√üen', '7,2', '0,8', '8,0'],
            ['OP30', 'Schruppen Innen', '4,0', '0,8', '4,8'],
            ['OP40', 'Lochkreis 8√ó', '3,2', '1,2', '4,4'],
            ['OP50', 'Schlichten √ò120 h5', '4,3', '0,8', '5,1'],
            ['OP60', 'Feinbohren √ò26 H7', '3,3', '0,8', '4,1'],
            ['OP70', 'Feinbohren √ò44 H7', '2,3', '0,8', '3,1'],
            ['OP80', 'Stufenfr√§sen', '3,1', '0,8', '3,9'],
            ['OP90', 'Gewindefr√§sen 4√ó', '2,4', '1,0', '3,4'],
            ['OP100', 'Anfasen', '1,5', '0,8', '2,3'],
            ['', 'SUMME', '33,2', '8,6', '41,8']
        ];

        const csv = data.map(row => row.join(';')).join('\n');
        const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8;' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'Zeitberechnung_Grundplatte_' + new Date().toISOString().split('T')[0] + '.csv';
        a.click();
        URL.revokeObjectURL(url);
    }

    // Feedback Toggle
    function toggleFeedback() {
        const form = document.getElementById('feedbackForm');
        form.classList.toggle('active');
    }

    // Rating
    function setRating(n) {
        currentRating = n;
        const stars = document.querySelectorAll('#ratingStars span');
        stars.forEach((star, i) => {
            star.textContent = i < n ? '‚òÖ' : '‚òÜ';
            star.classList.toggle('active', i < n);
        });
    }

    // Submit Feedback
    function submitFeedback() {
        alert('‚úÖ Feedback gesendet! Vielen Dank.');
        document.getElementById('feedbackForm').classList.remove('active');
    }

    // Checklist Toggle
    function toggleCheck(li) {
        li.classList.toggle('checked');
        const checkbox = li.querySelector('.checkbox');
        checkbox.textContent = li.classList.contains('checked') ? '‚úì' : '';
    }
</script>

</body>
</html>
