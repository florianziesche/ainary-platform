<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CNC Planner Development Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f5f7fa;
            padding: 20px;
        }
        
        .header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 24px;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .stats {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }
        
        .stat {
            padding: 10px 15px;
            background: #ecf0f1;
            border-radius: 4px;
        }
        
        .stat-label {
            font-size: 12px;
            color: #7f8c8d;
            text-transform: uppercase;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .board {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding-bottom: 20px;
        }
        
        .column {
            min-width: 320px;
            background: #ecf0f1;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            flex-direction: column;
        }
        
        .column-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #bdc3c7;
        }
        
        .column-title {
            font-size: 16px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .column-count {
            background: #95a5a6;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
        }
        
        .cards {
            display: flex;
            flex-direction: column;
            gap: 10px;
            min-height: 100px;
        }
        
        .card {
            background: white;
            border-radius: 6px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            cursor: grab;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .card.dragging {
            opacity: 0.5;
            cursor: grabbing;
        }
        
        .card-title {
            font-size: 14px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        
        .card-description {
            font-size: 13px;
            color: #7f8c8d;
            line-height: 1.4;
            margin-bottom: 10px;
        }
        
        .card-meta {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        
        .card-tag {
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .tag-priority-high {
            background: #e74c3c;
            color: white;
        }
        
        .tag-priority-medium {
            background: #f39c12;
            color: white;
        }
        
        .tag-priority-low {
            background: #3498db;
            color: white;
        }
        
        .tag-effort-low {
            background: #2ecc71;
            color: white;
        }
        
        .tag-effort-medium {
            background: #f39c12;
            color: white;
        }
        
        .tag-effort-high {
            background: #e74c3c;
            color: white;
        }
        
        .card-value {
            font-size: 12px;
            font-weight: bold;
            color: #27ae60;
            margin-top: 5px;
        }
        
        .column.research { background: #ecf0f1; }
        .column.review { background: #dfe6e9; }
        .column.approved { background: #d5f4e6; }
        .column.building { background: #fdedcc; }
        .column.done { background: #d1f2eb; }
        
        .action-buttons {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
        }
        
        .btn-success {
            background: #2ecc71;
            color: white;
        }
        
        .btn-success:hover {
            background: #27ae60;
        }
        
        .timeline {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .timeline-entry {
            padding: 10px 0;
            border-left: 3px solid #3498db;
            padding-left: 15px;
            margin-bottom: 10px;
        }
        
        .timeline-time {
            font-size: 12px;
            color: #95a5a6;
        }
        
        .timeline-action {
            font-size: 14px;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üöÄ CNC Planner Development Dashboard</h1>
        <p style="color: #7f8c8d; margin-top: 5px;">AI-Driven Feature Pipeline: Research ‚Üí Review ‚Üí Approve ‚Üí Build ‚Üí Ship</p>
        
        <div class="stats">
            <div class="stat">
                <div class="stat-label">Research Queue</div>
                <div class="stat-value" id="stat-research">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">Ready for Review</div>
                <div class="stat-value" id="stat-review">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">In Development</div>
                <div class="stat-value" id="stat-building">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">Shipped</div>
                <div class="stat-value" id="stat-done">0</div>
            </div>
        </div>
        
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="saveState()">üíæ Save State</button>
            <button class="btn btn-success" onclick="triggerMia()">ü§ñ Trigger Mia (Build Approved)</button>
        </div>
    </div>
    
    <div class="board">
        <div class="column research" data-status="research">
            <div class="column-header">
                <span class="column-title">üî¨ Research</span>
                <span class="column-count" id="count-research">0</span>
            </div>
            <div class="cards" id="cards-research"></div>
        </div>
        
        <div class="column review" data-status="review">
            <div class="column-header">
                <span class="column-title">üëÄ Review</span>
                <span class="column-count" id="count-review">0</span>
            </div>
            <div class="cards" id="cards-review"></div>
        </div>
        
        <div class="column approved" data-status="approved">
            <div class="column-header">
                <span class="column-title">‚úÖ Approved</span>
                <span class="column-count" id="count-approved">0</span>
            </div>
            <div class="cards" id="cards-approved"></div>
        </div>
        
        <div class="column building" data-status="building">
            <div class="column-header">
                <span class="column-title">üèóÔ∏è Building</span>
                <span class="column-count" id="count-building">0</span>
            </div>
            <div class="cards" id="cards-building"></div>
        </div>
        
        <div class="column done" data-status="done">
            <div class="column-header">
                <span class="column-title">üéâ Done</span>
                <span class="column-count" id="count-done">0</span>
            </div>
            <div class="cards" id="cards-done"></div>
        </div>
    </div>
    
    <div class="timeline" id="timeline">
        <h3 style="margin-bottom: 15px;">üìú Activity Log</h3>
        <div id="timeline-entries"></div>
    </div>
    
    <script>
        // State management
        let state = {
            cards: [],
            timeline: []
        };
        
        // Initialize with demo data
        function initDemoData() {
            state.cards = [
                {
                    id: 'card-1',
                    title: 'File Upload (STEP, STL, PDF)',
                    description: 'Drag & Drop interface, file validation, preview, metadata extraction',
                    status: 'research',
                    priority: 'high',
                    effort: 'medium',
                    value: '‚Ç¨150/mo per customer',
                    details: {
                        problem: 'Users m√ºssen alle Daten manuell eingeben (15 Min/Teil)',
                        solution: 'FileReader API + STEP parser (opencascade.js)',
                        impact: 'Dealmaker f√ºr 80% der Kunden',
                        timeline: '1 Woche'
                    }
                },
                {
                    id: 'card-2',
                    title: 'Basic CAD Analysis',
                    description: 'Bounding Box (L√óB√óH), Volume, Feature Detection (Bohrungen), Auto-fill form',
                    status: 'research',
                    priority: 'high',
                    effort: 'high',
                    value: '‚Ç¨150/mo per customer',
                    details: {
                        problem: 'User muss Geometrie manuell messen',
                        solution: 'STEP parsing + Geometry analysis',
                        impact: 'Spart 10 Min pro Teil',
                        timeline: '2 Wochen'
                    }
                },
                {
                    id: 'card-3',
                    title: 'Arbeitsplan Export (PDF/Excel)',
                    description: 'Template-based export, OP-Liste, Werkzeuge, Zeiten, customizable',
                    status: 'research',
                    priority: 'high',
                    effort: 'low',
                    value: '‚Ç¨50/mo per customer',
                    details: {
                        problem: 'AV muss Arbeitsplan manuell √ºbertragen',
                        solution: 'jsPDF Template + Excel Export',
                        impact: 'Zeitersparnis AV',
                        timeline: '3 Tage'
                    }
                },
                {
                    id: 'card-4',
                    title: '3D Viewer (Interactive)',
                    description: 'three.js STEP rendering, rotate/zoom/pan, measure tool, feature highlighting',
                    status: 'research',
                    priority: 'medium',
                    effort: 'medium',
                    value: '‚Ç¨100/mo per customer',
                    details: {
                        problem: 'User muss CAD extern √∂ffnen',
                        solution: 'three.js + STEP loader',
                        impact: 'Professional UX',
                        timeline: '1 Woche'
                    }
                },
                {
                    id: 'card-5',
                    title: 'Archive (Parts + Quotes)',
                    description: 'IndexedDB storage, search, re-load old calculations, export/import',
                    status: 'research',
                    priority: 'medium',
                    effort: 'low',
                    value: '‚Ç¨50/mo per customer',
                    details: {
                        problem: 'Alte Kalkulationen verloren',
                        solution: 'IndexedDB + Search',
                        impact: 'Wiederholungsauftr√§ge einfacher',
                        timeline: '2 Tage'
                    }
                }
            ];
            
            render();
        }
        
        // Render dashboard
        function render() {
            // Clear all columns
            ['research', 'review', 'approved', 'building', 'done'].forEach(status => {
                document.getElementById(`cards-${status}`).innerHTML = '';
            });
            
            // Render cards
            state.cards.forEach(card => {
                const cardEl = createCardElement(card);
                document.getElementById(`cards-${card.status}`).appendChild(cardEl);
            });
            
            // Update counts
            updateCounts();
            
            // Render timeline
            renderTimeline();
        }
        
        function createCardElement(card) {
            const div = document.createElement('div');
            div.className = 'card';
            div.draggable = true;
            div.dataset.cardId = card.id;
            
            div.innerHTML = `
                <div class="card-title">${card.title}</div>
                <div class="card-description">${card.description}</div>
                <div class="card-meta">
                    <span class="card-tag tag-priority-${card.priority}">P: ${card.priority.toUpperCase()}</span>
                    <span class="card-tag tag-effort-${card.effort}">E: ${card.effort.toUpperCase()}</span>
                </div>
                <div class="card-value">${card.value}</div>
            `;
            
            // Drag events
            div.addEventListener('dragstart', handleDragStart);
            div.addEventListener('dragend', handleDragEnd);
            
            return div;
        }
        
        function updateCounts() {
            ['research', 'review', 'approved', 'building', 'done'].forEach(status => {
                const count = state.cards.filter(c => c.status === status).length;
                document.getElementById(`count-${status}`).textContent = count;
                document.getElementById(`stat-${status}`).textContent = count;
            });
        }
        
        function renderTimeline() {
            const container = document.getElementById('timeline-entries');
            container.innerHTML = state.timeline.slice(-10).reverse().map(entry => `
                <div class="timeline-entry">
                    <div class="timeline-time">${new Date(entry.timestamp).toLocaleString('de-DE')}</div>
                    <div class="timeline-action">${entry.action}</div>
                </div>
            `).join('');
        }
        
        // Drag & Drop
        let draggedCard = null;
        
        function handleDragStart(e) {
            draggedCard = e.target;
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }
        
        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }
        
        // Enable drop zones
        document.querySelectorAll('.cards').forEach(zone => {
            zone.addEventListener('dragover', e => {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'move';
            });
            
            zone.addEventListener('drop', e => {
                e.preventDefault();
                if (!draggedCard) return;
                
                const cardId = draggedCard.dataset.cardId;
                const newStatus = zone.closest('.column').dataset.status;
                
                // Update state
                const card = state.cards.find(c => c.id === cardId);
                if (card) {
                    const oldStatus = card.status;
                    card.status = newStatus;
                    
                    // Log activity
                    state.timeline.push({
                        timestamp: Date.now(),
                        action: `Moved "${card.title}" from ${oldStatus} ‚Üí ${newStatus}`
                    });
                    
                    // Save and render
                    saveState();
                    render();
                    
                    // Auto-trigger Mia if moved to approved
                    if (newStatus === 'approved') {
                        alert(`‚úÖ "${card.title}" approved! Click "Trigger Mia" to start development.`);
                    }
                }
            });
        });
        
        // Save/Load state
        function saveState() {
            localStorage.setItem('cnc-dashboard-state', JSON.stringify(state));
            alert('üíæ State saved!');
        }
        
        function loadState() {
            const saved = localStorage.getItem('cnc-dashboard-state');
            if (saved) {
                state = JSON.parse(saved);
                render();
            } else {
                initDemoData();
            }
        }
        
        // Trigger Mia
        function triggerMia() {
            const approved = state.cards.filter(c => c.status === 'approved');
            if (approved.length === 0) {
                alert('‚ö†Ô∏è No cards in Approved column!');
                return;
            }
            
            alert(`ü§ñ Mia will start building ${approved.length} approved feature(s):\n\n${approved.map(c => '‚Ä¢ ' + c.title).join('\n')}\n\nCheck terminal for progress!`);
            
            // Move to building
            approved.forEach(card => {
                card.status = 'building';
                state.timeline.push({
                    timestamp: Date.now(),
                    action: `ü§ñ Mia started building "${card.title}"`
                });
            });
            
            saveState();
            render();
        }
        
        // Initialize
        loadState();
    </script>
</body>
</html>
